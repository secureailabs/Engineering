# Engineering
# deploy_platform.yml
# Deployment of Platform Services [api + Frontend] to a specified Subscription in Azure
#
# Copyright (C) 2022 Secure Ai Labs, Inc. All Rights Reserved.
# Private and Confidential. Internal Use Only.
#
#     This software contains proprietary information which shall not
#     be reproduced or transferred to other documents and shall not
#     be disclosed to others for any purpose without
#     prior written permission of Secure Ai Labs, Inc.
#
#

name: Deploy Platform

on:
  workflow_dispatch:
    inputs:
      owner:
        description: "Owner of Deployment"
        required: true
        type: string

jobs:
  Setup_Environment:
    runs-on: [self-hosted, Linux, x64, docker, Platform]
    steps:
      - name: Options selected
        run: |
          echo "Subscription: ${{ github.event.inputs.subscription }}"
          echo "Preload Datasets: ${{ github.event.inputs.preload_dataset }}"
          echo "Purpose of Deployment: ${{ github.event.inputs.purpose }}"
          echo "Owner of Deployment: ${{ github.event.inputs.owner }}"

      - name: Clear repository
        run: sudo rm -fr $GITHUB_WORKSPACE && mkdir $GITHUB_WORKSPACE

      - name: Check out source repository
        uses: actions/checkout@v3
        with:
          token: ${{ secrets.JENKINS_BUILD_TOKEN }}
          persist-credentials: true

      - name: checkout submodule
        run: |
          git submodule init
          git submodule update --remote

      - name: Condition 2 Release Candidate
        run: |
          cd datascience
          ls
          git status



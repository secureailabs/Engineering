<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="513px" preserveAspectRatio="none" style="width:1158px;height:513px;background:#EEEEEE;" version="1.1" viewBox="0 0 1158 513" width="1158px" zoomAndPan="magnify"><defs><filter height="300%" id="fx969j5dca4dp" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="219" x="470.5" y="22.9951">Connect to Aggregator SCN</text><rect fill="#FFC0CB" filter="url(#fx969j5dca4dp)" height="100.5313" style="stroke: #000000; stroke-width: 2.0;" width="952" x="195" y="220.9922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="51" x2="51" y1="116.5938" y2="425.9219"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="257" x2="257" y1="116.5938" y2="425.9219"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="534.5" x2="534.5" y1="116.5938" y2="425.9219"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="673.5" x2="673.5" y1="116.5938" y2="425.9219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="8" y="113.292">Researcher</text><ellipse cx="51" cy="43.2969" fill="#FF0000" filter="url(#fx969j5dca4dp)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M51,51.2969 L51,78.2969 M38,59.2969 L64,59.2969 M51,78.2969 L38,93.2969 M51,78.2969 L64,93.2969 " fill="none" filter="url(#fx969j5dca4dp)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="8" y="437.917">Researcher</text><ellipse cx="51" cy="451.2188" fill="#FF0000" filter="url(#fx969j5dca4dp)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M51,459.2188 L51,486.2188 M38,467.2188 L64,467.2188 M51,486.2188 L38,501.2188 M51,486.2188 L64,501.2188 " fill="none" filter="url(#fx969j5dca4dp)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#ADD8E6" filter="url(#fx969j5dca4dp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="205" y="81.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="212" y="101.292">API_Services</text><rect fill="#ADD8E6" filter="url(#fx969j5dca4dp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="205" y="424.9219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="212" y="444.917">API_Services</text><rect fill="#90EE90" filter="url(#fx969j5dca4dp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="469.5" y="81.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="476.5" y="101.292">Aggregator_SCN</text><rect fill="#90EE90" filter="url(#fx969j5dca4dp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="469.5" y="424.9219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="476.5" y="444.917">Aggregator_SCN</text><rect fill="#D3D3D3" filter="url(#fx969j5dca4dp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="122" x="610.5" y="81.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="617.5" y="101.292">Participant_SCN</text><rect fill="#D3D3D3" filter="url(#fx969j5dca4dp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="122" x="610.5" y="424.9219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="617.5" y="444.917">Participant_SCN</text><polygon fill="#A80036" points="245,143.7266,255,147.7266,245,151.7266,249,147.7266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="51" x2="251" y1="147.7266" y2="147.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="63" y="142.6606">1.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="79" y="142.6606">/login with compute scope</text><polygon fill="#A80036" points="62,172.8594,52,176.8594,62,180.8594,58,176.8594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="56" x2="256" y1="176.8594" y2="176.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="70.5" y="171.7935">2.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="86.5" y="171.7935">compute_access_token</text><polygon fill="#A80036" points="523,201.9922,533,205.9922,523,209.9922,527,205.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="51" x2="529" y1="205.9922" y2="205.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="139" y="200.9263">3.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="292" x="155" y="200.9263">/federated-mean with compute_access_token</text><path d="M195,220.9922 L413,220.9922 L413,227.9922 L403,237.9922 L195,237.9922 L195,220.9922 " fill="#FFD700" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="100.5313" style="stroke: #000000; stroke-width: 2.0;" width="952" x="195" y="220.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="173" x="210" y="234.0591">New or expired session</text><polygon fill="#A80036" points="268,255.2578,258,259.2578,268,263.2578,264,259.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="262" x2="534" y1="259.2578" y2="259.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="269" y="254.1919">4.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="238" x="285" y="254.1919">/me with new compute_access_token</text><polygon fill="#A80036" points="523,309.5234,533,313.5234,523,317.5234,527,313.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="257" x2="529" y1="313.5234" y2="313.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="359.5" y="308.4575">5.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="57" x="375.5" y="308.4575">User info</text><path d="M540,279.8242 L540,304.8242 L774,304.8242 L774,289.8242 L764,279.8242 L540,279.8242 " fill="#FBFB77" filter="url(#fx969j5dca4dp)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M764,279.8242 L764,289.8242 L774,289.8242 L764,279.8242 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="213" x="546" y="296.8911">validates the user is a researcher</text><path d="M540,272.2578 L540,312.2578 L875,312.2578 L875,282.2578 L865,272.2578 L540,272.2578 " fill="#FBFB77" filter="url(#fx969j5dca4dp)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M865,272.2578 L865,282.2578 L875,282.2578 L865,272.2578 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="258" x="546" y="289.3247">If success, Aggregator SCN will store the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="314" x="546" y="304.4575">compute_access_token or its hash in the session</text><polygon fill="#A80036" points="546,345.6563,536,349.6563,546,353.6563,542,349.6563" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="661.5,345.6563,671.5,349.6563,661.5,353.6563,665.5,349.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="540" x2="667.5" y1="349.6563" y2="349.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="547.75" y="344.5903">6.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="563.75" y="344.5903">RPC interaction</text><polygon fill="#A80036" points="62,374.7891,52,378.7891,62,382.7891,58,378.7891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="56" x2="534" y1="378.7891" y2="378.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="222" y="373.7231">7.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="238" y="373.7231">Computation Result</text><polygon fill="#A80036" points="245,403.9219,255,407.9219,245,411.9219,249,407.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="51" x2="251" y1="407.9219" y2="407.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="75" y="402.856">8.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="91" y="402.856">deprovision federation</text><!--
@startuml Connect_to_Aggregator_SCN
autonumber "#."
title Connect to Aggregator SCN
skinparam backgroundColor #EEEEEE
skinparam sequenceMessageAlign center
actor Researcher #red
participant API_Services #LightBlue
participant Aggregator_SCN #LightGreen
participant Participant_SCN #LightGrey

Researcher -> API_Services : /login with compute scope

API_Services -> Researcher : compute_access_token

Researcher -> Aggregator_SCN : /federated-mean with compute_access_token
group#Gold #Pink New or expired session
    Aggregator_SCN -> API_Services : /me with new compute_access_token

    API_Services - -> Aggregator_SCN : User info
    note right
        validates the user is a researcher
    end note
    note right
        If success, Aggregator SCN will store the
        compute_access_token or its hash in the session
    end note
end

Aggregator_SCN <-> Participant_SCN : RPC interaction

Researcher <- Aggregator_SCN : Computation Result

Researcher -> API_Services : deprovision federation

@enduml

PlantUML version 1.2018.13(Mon Nov 26 22:41:51 IST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 17.0.4+8-Ubuntu-120.04
Operating System: Linux
OS Version: 5.10.102.1-microsoft-standard-WSL2
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>